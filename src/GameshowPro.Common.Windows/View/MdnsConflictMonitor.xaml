<ResourceDictionary
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:gl="clr-namespace:System.Globalization;assembly=mscorlib" 
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:conv="clr-namespace:GameshowPro.Common.Converters"
             xmlns:commodel="clr-namespace:GameshowPro.Common.Model;assembly=GameshowPro.Common"
             xmlns:comview="clr-namespace:GameshowPro.Common.View"
             xmlns:controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"  
             mc:Ignorable="d">
    <Thickness x:Key="ControlMargin">10</Thickness>
    <Thickness x:Key="ControlSmallMargin">5</Thickness>
    <conv:GreaterThanToBooleanConverter x:Key="GreaterThanToBooleanConverter"/>
    <conv:TimeSpanToSecondsConverter x:Key="TimeSpanToSecondsConverter"/>
    <DataTemplate DataType="{x:Type commodel:IMdnsConflictMonitor}" x:Key="IMdnsConflictMonitor.Warning">
        <controls:DropDownButton Width="25" Height="25" ItemsSource="{Binding ConflictingServices}">  
           <controls:DropDownButton.ItemTemplate>  
               <DataTemplate DataType="commodel:IMdnsConflictingService">  
                   <controls:DropDownButton Icon="{iconPacks:Material Kind=NetworkOutline}" Content="{Binding HostName}" HorizontalContentAlignment="Left" ItemsSource="{Binding Addresses}" ToolTip="Click to show addresses for this host"/>  
               </DataTemplate>  
           </controls:DropDownButton.ItemTemplate>  
           <controls:DropDownButton.Style>  
               <Style TargetType="controls:DropDownButton" BasedOn="{StaticResource CircleDropDownButton}">  
                   <Setter Property="Icon" Value="{iconPacks:Material Kind=AccessPointCheck, Width=15, Height=15}" />  
                   <Setter Property="Foreground" Value="LightGray"/>  
                   <Setter Property="ToolTip" Value="No conflicting application instances found"/>  
                   <Style.Resources>  
                       <Storyboard x:Key="flashAnimation" >  
                           <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground.Color" Duration="0:0:0.5" RepeatBehavior="Forever" >  
                               <ColorKeyFrameCollection>  
                                   <DiscreteColorKeyFrame Value="Red" KeyTime="0:0:0.1"/>  
                                   <DiscreteColorKeyFrame Value="Transparent" KeyTime="0:0:0.2"/>  
                                   <DiscreteColorKeyFrame Value="Blue" KeyTime="0:0:0.3"/>  
                                   <DiscreteColorKeyFrame Value="Transparent" KeyTime="0:0:0.4"/>  
                               </ColorKeyFrameCollection>  
                           </ColorAnimationUsingKeyFrames>  
                       </Storyboard>  
                   </Style.Resources>  
                   <Style.Triggers>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Mode=Self}}" Value="False" />
                                <Condition Binding="{Binding ConflictingServices.Length, Converter={StaticResource GreaterThanToBooleanConverter}, ConverterParameter={conv:Int32 0}}" Value="{conv:Bool True}" />
                            </MultiDataTrigger.Conditions>
                            <Setter Property="ToolTip" Value="Conflicting application instances found! Click for details"/>
                            <MultiDataTrigger.EnterActions>
                                <BeginStoryboard Name="flash" Storyboard="{StaticResource flashAnimation}" />
                            </MultiDataTrigger.EnterActions>
                            <MultiDataTrigger.ExitActions>
                                <StopStoryboard BeginStoryboardName="flash"/>
                            </MultiDataTrigger.ExitActions>
                        </MultiDataTrigger>
                        <DataTrigger Binding="{Binding ConflictingServices.Length, Converter={StaticResource GreaterThanToBooleanConverter}, ConverterParameter={conv:Int32 0}}" Value="{conv:Bool True}">
                            <Setter Property="Icon" Value="{iconPacks:RemixIcon Kind=AlarmWarningFill, Width=15, Height=15}" />
                        </DataTrigger>
                    </Style.Triggers>  
               </Style>  
           </controls:DropDownButton.Style>  
        </controls:DropDownButton>
    </DataTemplate>
</ResourceDictionary>
